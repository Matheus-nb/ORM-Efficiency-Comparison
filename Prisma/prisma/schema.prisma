// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// Define the employees table
model Employee {
  emp_no      Int          @id
  birth_date  DateTime
  first_name  String
  last_name   String
  gender      String
  hire_date   DateTime
  titles      Title[]
  salaries    Salary[]
  departments Department[]
  Manager     Manager[]
  DeptEmp     DeptEmp[]
}

// Define the departments table
model Department {
  dept_no   String     @id
  dept_name String
  employees Employee[]
  managers  Manager[]
  DeptEmp   DeptEmp[]
}

// Define the dept_manager table
model Manager {
  emp_no     Int
  dept_no    String
  from_date  DateTime
  to_date    DateTime
  employee   Employee   @relation(fields: [emp_no], references: [emp_no])
  department Department @relation(fields: [dept_no], references: [dept_no])

  @@id([emp_no, dept_no])
}

// Define the dept_emp table
model DeptEmp {
  emp_no     Int
  dept_no    String
  from_date  DateTime
  to_date    DateTime
  employee   Employee   @relation(fields: [emp_no], references: [emp_no])
  department Department @relation(fields: [dept_no], references: [dept_no])

  @@id([emp_no, dept_no])
}

// Define the titles table
model Title {
  emp_no    Int
  title     String
  from_date DateTime
  to_date   DateTime?
  employee  Employee  @relation(fields: [emp_no], references: [emp_no])

  @@id([emp_no, title, from_date])
}

// Define the salaries table
model Salary {
  emp_no    Int
  salary    Int
  from_date DateTime
  to_date   DateTime
  employee  Employee @relation(fields: [emp_no], references: [emp_no])

  @@id([emp_no, from_date])
}
